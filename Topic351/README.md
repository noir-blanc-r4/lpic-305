# Full Virtualization(主題351)

## 仮想化の概念と理論

| 問題 | 回答 |
| ---- | ---- |
| 以下の特徴を持つ仮想環境の統合管理プラットフォームソフトウェアは？ <br>・KVMとLXCをサポートしており、仮想マシンとコンテナの両方を一元的に管理できる <br>・仮想マシンのクラスタリング機能やストレージ管理、Webベースでの管理インタフェースを持つ | Proxmox VE |
| 以下の特徴を持つ仮想環境の統合管理プラットフォームソフトウェアは？ <br>・VMware社が提供する仮想化環境の統合管理プラットフォーム <br>・VMwareの仮想化製品群を一元的に管理し、リソースの割り当て、パフォーマンスモニタリング、セキュリティ管理などの機能を提供 | VMware vCenter |
| 以下の特徴を持つ仮想環境の統合管理プラットフォームソフトウェアは？ <br>・Citrix社が提供するXenServerの管理ツール <br>・XenServer環境の統合管理を行い、仮想マシンの作成、リソース割り当て、パフォーマンス監視などの機能を提供 | Citrix XenCenter |
| KVMの仮想マシン管理ツールとしてRed Hatによって開発された仮想環境の統合管理プラットフォームで、次の特徴を持つソフトウェアは？ <br>・仮想マシン管理ツールのスタンダードとして簡易でわかりやすいWebインタフェース <br> ・複数のハイパーバイザーや仮想環境を包括的に管理できる | oVirt |
| 特定のハードウェアの動作をソフトウェアで模倣し、異なるシステム上で本来そのハードウェアでしか動作しないソフトウェアやOSを動かす技術は？ | エミュレーション |
| サーバ仮想化において、物理マシンのBIOSから直接起動した仮想化ソフトウェアで仮想マシンを動作させる手法をなんというか | ハイパーバイザー (型仮想化) |
| サーバ仮想化において、ホストOS上にインストールした仮想化ソフトウェアで仮想マシンを動作させる手法をなんというか | ホストOS (型仮想化) |
| 仮想ネットワークの構築、トラフィックの制御や管理を行うソフトウェアスイッチは？ | Open vSwitch |
| マルチプロセッサシステムのアーキテクチャにおいて、複数のCPUが1つの共有メモリを使用し、それぞれのCPUが共有メモリへ等しいアクセス時間でアクセスする方法は？（略語で） | SMP |
| マルチプロセッサシステムのアーキテクチャにおいて、複数のCPUがそれぞれ独自のメモリ（ローカルメモリ）を持つ方式は？（略語で） | NUMA |
| Intel製CPUにおける仮想化支援機能の名称は？ | Intel VT |
| AMD製CPUにおける仮想化支援機能の名称は？ | AMD-V |
| CPUの仮想化支援機能の一つで、ゲストOSの仮想メモリアドレスをホストの物理メモリアドレスに変換する機能は？（略称で。Intelが提供する技術の名称、AMDが提供する技術の名称の順に回答）| **Intel:** EPT <br> **AMD:** RVI |
| CPUに仮想化支援機能があるかどうかを確認できるファイルは？（フルパス） | /proc/cpuinfo |
| 「/proc/cpuinfo」において、Intel VTが有効になっている際のCPUフラグは？ | `vmx` |
| 「/proc/cpuinfo」において、AMD-Vが有効になっている際のCPUフラグは？ | `svm` |
| systemdにおいて、systemdのcgroup（control groups）を利用した仮想マシンやコンテナの基本的な管理のためのインタフェースを提供したり、CPU、メモリ、I/Oなどのリソース管理を行うコンポーネントは？ | systemd-machined |

[戻る](../README.md#full-virtualization主題351)


## Xen 1

| 問題 | 回答 |
| ---- | ---- |
| Xenの高機能管理ツールであるAPIをなんというか | XAPI |
| Xenにおいて稼働中の仮想マシンの構成情報データベースをなんというか | XenStore |
| Xenの管理用ドメインをなんというか | Domain-0 |
| XenのゲストOSをインストールするドメインをなんというか | Domain-U |
| Domain-0側から見た際のDomain-Uの仮想ネットワークインターフェイス名をなんというか | vif |
| Xenにおいて、ドメイン（ゲスト）定義ファイルなどの主要なファイルやディレクトリが置かれるディレクトリは？ | /etc/xen/ |
| システム起動時に自動的にXenのゲストOSも起動させる場合、Xenのドメイン（ゲスト）定義ファイルのシンボリックリンクの配置先のディレクトリは？（フルパス）| /etc/xen/auto/ |
| Xenにおいてxlツールスタックの全体的な設定を行うファイルを答えよ（フルパス） | /etc/xen/xl.conf |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、仮想CPUの数を指定する設定項目は？ | `vcpus` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、メモリサイズを指定する設定項目は？ | `memory` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、ドメインの仮想ネットワークインタフェースのMACアドレスとIPアドレスを指定する設定項目は？ | `vif` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、仮想マシンに割り当てるディスクデバイスを指定する設定項目は？ | `disk` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、RAMディスクファイルを絶対パスで指定する設定項目は？ | `ramdisk` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、カーネルイメージファイルを絶対パスで指定する設定項目は？ | `kernel` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、ルートデバイスを指定する設定項目は？ | `root` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、仮想マシン名を指定する設定項目は？ | `name` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、ドメインをハードディスクから起動するよう指定する設定項目および値は？ 設定項目、設定値の順に答えよ | **設定項目:** `boot` <br> **設定値:** `c` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、準仮想化マシンを作成するための設定項目および値は？設定項目、設定値の順に答えよ | **設定項目:** `builder` <br> **設定値:** `generic` |
| Xenのドメイン定義ファイル「/etc/xen/xl.cfg（ドメイン名.cfg）」で、マシンを作成するための設定項目および値は？設定項目、設定値の順に答えよ | **設定項目:** `builder` <br> **設定値:** `hvm` |
| Domain-0の起動オプションを記述するファイル名を答えよ（ファイル名のみ） | grub.cfg |
| 「grub.cfg」において、Domain-0のメモリ制限を設定する項目は？ | `dom0_mem` |
| Xenドメインの構成情報を階層的な名前空間で表示するコマンドは？ | `xenstore-ls` |
| Xenのコマンドで、各仮想マシンの稼働状況をリアルタイムに更新しながら表示するものは？（xlサブコマンド以外のコマンドを回答） | `xentop` |


[戻る](../README.md#full-virtualization主題351)


## Xen 2

| 問題 | 回答 |
| ---- | ---- |
| Xen 4.xでデフォルトで使用されるツールスタックは？ | xl |
| xlコマンドで、仮想マシンを起動するサブコマンドは？ | `create` |
| xlコマンドで、実行中の仮想マシンを停止するサブコマンドは？（強制終了、通常終了の順に回答） | **強制終了:** `destroy` <br> **通常終了:** `shutdown` |
| xlコマンドで、仮想マシンを再起動するサブコマンドは？ | `reboot` |
| xlコマンドで、仮想マシンのコンソールに接続するサブコマンドは？ | `console` |
| xlコマンドで、仮想マシンを一時停止するサブコマンドは？ | `pause` |
| xlコマンドで、一時停止中の仮想マシンを再開するサブコマンドは？ | `unpause` |
| xlコマンドで、仮想マシンの状態をファイルに保存・停止するサブコマンドは？ | `save` |
| xlコマンドで、仮想マシンを状態ファイルから復元・起動するサブコマンドは？ | `restore` |
| xlコマンドで、稼働中の仮想マシンの一覧を表示するサブコマンドは？ | `list` |
| xlコマンドで、稼働中の仮想マシンの情報をリアルタイムに更新しながら表示するサブコマンドは？ | `top` | 
| xlコマンドで、仮想マシンの仮想CPUの情報を表示するサブコマンドは？ | `vcpu-list` |
| xlコマンドで、仮想マシンの仮想CPU数を設定するサブコマンドは？ | `vcpu-set` |
| xlコマンドで、仮想マシンのブロックデバイス一覧を表示するサブコマンドは？ | `block-list` |
| xlコマンドで、準仮想化ゲストの仮想CD-ROMを入れ替えるサブコマンドは？仮想CD-ROMの排出、挿入の順に答えよ  | **排出:** `block-detach` <br> **挿入:** `block-attach` |
| xlコマンドで、完全仮想化ゲストの仮想CD-ROMを入れ替えるサブコマンドは？ただし、ホストから見たブロックデバイスの変更ができるだけ少ないコマンドとする。仮想CD-ROMの排出、挿入の順に答えよ | **排出:** `cd-eject` <br> **挿入:** `cd-insert` |
| xlコマンドで、Xen起動時のメッセージを表示するサブコマンドは？ | `dmesg` |
| Xenの「Fedora」というドメインを移行先のホスト192.168.1.30へ稼働中のまま移行したい。下線部に当てはまるサブコマンドは？ <br> ```xl ___________ Fedora 192.168.1.30``` | `migrate` |
| 「/etc/xen/centos」ファイルに従って仮想マシンを起動し、コンソールに接続したい。下線部に当てはまるオプションは？ <br> ```xl create ____ /etc/xen/centos``` | `-c` |
| Xenがインストールされている環境で、使用マシンのIntel CPUが完全仮想化に対応しているかを確認したい。以下のコマンド文を完成させよ <br> ```xl dmesg \| grep ______``` | `HVM` |

[戻る](../README.md#full-virtualization主題351)


## QEMU 1

| 問題 | 回答 |
| ---- | ---- |
| QEMUが、ブロックデバイスやネットワークインタフェースなどの仮想化を実現したり、ホストOSのデバイスと通信する機能を持つデバイスドライバの標準をなんというか | VirtIO |
| QEMUにおいて、仮想ブリッジ「br1」を作成して使用したい。下線に当てはまるコマンドを答えよ。<br> ```______ addbr br1``` <br> ```ip link add br1 type _______``` | `brctl` <br> `bridge` |
| QEMUにおいて、TAPインタフェース「tap0」を作成して使用したい。下線に当てはまるコマンドを答えよ。 <br> ```______ -p -t tap0``` <br> ```ip ______ add dev tap0 mode tap``` | `tunctl` <br> `tuntap` |
| KVMの仮想環境において、QEMUがKVMとやりとりをするデバイスファイル名は？（フルパス） | /dev/kvm |
| Intel VT対応のCPUを使用している環境下でKVMを使用するためのカーネルモジュールのファイル名は？| kvm_intel.ko |
| AMD-V対応のCPUを使用している環境下でKVMを使用するためのカーネルモジュールのファイル名は？ | kvm_amd.ko |
| QEMUモニタで、稼働中の仮想マシンのスナップショットを作成するコマンドは？ | `savevm` |
| QEMUモニタで、スナップショットから復元を行うコマンドは？ | `loadvm` |
| QEMUモニタで、スナップショットを削除するコマンドは？ | `delvm` |
| QEMUモニタで、仮想マシンに挿入されているCD-ROMを排出するコマンドは？ | `eject` |
| QEMUモニタで、仮想マシンのCPU情報を確認するコマンドは？ | ```info cpus``` |
| QEMUモニタで、稼働中の仮想マシンのネットワーク情報を確認するコマンドは？ | ```info network``` |
| QEMUモニタで、稼働中の仮想マシンのブロックデバイス情報を確認するコマンドは？ | `info block` |
| QEMUモニタで、仮想マシンのスナップショット一覧を表示するコマンドは？| ```info snapshots``` |
| QEMUモニタで、KVMが有効か無効かを確認するコマンドは？ | ```info kvm``` |
| QEMUモニタで、「 ```qemu-system-x86_64 -cdrom``` 」により取り付けられた仮想CD-ROMドライブから仮想メディアを強制的に取り出すコマンドは？ | ```eject -f ide1-cd0``` |
| QEMUモニタで、仮想マシンのCD-ROMを「centos.iso」に入れ替えるコマンドは？ | ```change ide1-cd0 centos.iso``` |

[戻る](../README.md#full-virtualization主題351)


## 仮想マシンのディスクイメージの管理

| 問題 | 回答 |
| ---- | ---- |
| qemu-imgコマンドにおいて、仮想マシン用のディスクイメージを作成するサブコマンドは？ | `create` |
| qemu-imgコマンドにおいて、仮想ディスクイメージのファイル形式を変換するサブコマンドは？  | `convert` |
| qemu-imgコマンドにおいて、仮想ディスクイメージファイルのサイズを変更するサブコマンドは？ | `resize` |
| qemu-imgコマンドにおいて、仮想ディスクイメージファイルの情報を表示するサブコマンドは？ | `info` |
| 以下の条件で仮想ディスクイメージを作成するとき、下線部に当てはまるものを答えよ <br>・ファイル形式：qcow2 <br>・ファイル名：centos.img <br>・サイズ：8GB <br> ```qemu-img create ____ qcow2 centos.img 8G``` | `-f` |
| qemu-imgコマンドを用いて、仮想マシンのスナップショット一覧を表示するコマンドラインを答えよ | ```qemu-img snapshot -l``` |
| 仮想マシンのディスクイメージを、ホストシステムへマウントして操作することができるオープンソースのライブラリ名は？| libguestfs |
| libguestfsライブラリを用いて、仮想マシンのディスクイメージ上のファイルへアクセスしたり編集することができるツールは？ | guestfish |
| libguestfsのツールで、仮想マシンのディスクイメージをマウントするコマンドとアンマウントするコマンドをそれぞれ答えよ| **マウント:** `guestmount` <br>**アンマウント:** `guestunmount` |
| libguestfsのツールで、仮想マシンのディスクイメージ内のファイルを編集するコマンドは？ | `virt-edit` |
| libguestfsのツールで、仮想マシンのディスクイメージ内のファイルの内容を表示するコマンドは？ | `virt-cat` |
| libguestfsのツールで、仮想マシンのディスクイメージ内のファイルシステムとパーティションを表示するコマンドは？ | `virt-filesystems` |
| libguestfsのツールで、仮想マシンのディスクイメージにインストールされたOSやアプリケーション等の情報を取得するコマンドは？ | `virt-inspector` |
| libguestfsのツールで、仮想マシンのディスクイメージ上にある「/home/guest」ディレクトリを、ホストマシンのディレクトリへコピーしたいとき、用いるコマンドは？ | `virt-copy-out` |
| libguestfsのツールで、ホストマシンからディスクイメージへファイルやディレクトリをコピーするコマンドは？| `virt-copy-in` |
| libguestfsのツールで、仮想マシンのディスクイメージの容量を変更するコマンドは？ | `virt-resize` |
| libguestfsのツールで、仮想マシンのディスクイメージから機密情報を削除するコマンドは？ | `virt-sysprep` |
| libguestfsのツールで、ディスクイメージの未使用領域を削除（圧縮）し、別のファイルとして出力するコマンドは？ | `virt-sparsify` |
| libguestfsのツールで、ゲストOSが起動しないときに救助用のシェルを提供するコマンドは？ | `virt-rescue` |
| libguestfsのツールで、VMwareやXenなどのハイパーバイザー上で動作する仮想マシンを、KVM、RHEV、またはoVirt互換の環境で動作可能な形式に変換するコマンドは？ | `virt-v2v` |
| libguestfsのツールで、物理マシンを仮想マシンのディスクイメージへ変換するコマンドは？| `virt-p2v` |
| libguestfsのツールで、物理マシンを仮想マシンに変換するためのブータブルディスクまたはUSBイメージを作成するコマンドは？ | `virt-p2v-make-disk` |
| libguestfsのツールで、2つのディスクイメージ「old.qcow2」と「new.qcow2」の差分を表示するコマンドは？ 下線部を答えよ ```_________ -a old.qcow2 -A new.qcow2``` | `virt-diff` |
| libguestfsのツールで、仮想マシンのディスクイメージ「img.qcow2」のファイルシステム「/dev/hoge/root」を、ホストマシンの「/mnt」へマウントしたいとき、下線部に当てはまるものを答えよ <br> ```guestmount -a ________ -m ______ ________``` | `img.qcow2` <br> `/dev/hoge/root` <br> `/mnt` |
| libguestfsのツールを用いて、仮想マシン「hoge」のディスク使用量を参照するコマンドを答えよ | ```virt-df -d hoge``` |
| libguestfsのツールを用いて、仮想マシンのディスクイメージ「hoge.img」のディスク使用量を参照するコマンドを答えよ | ```virt-df -a hoge.img``` |
| 仮想マシン「demo」をテスト環境用のテンプレートとして使用するため仮想マシンに保存されたユーザアカウントやSSHのキーなどの情報を削除したい。適切なコマンドラインを答えよ | ```virt-sysprep -d demo``` |
| 仮想マシンのディスクイメージのファイル形式で、以下の特徴を持つものは？（略語で） <br>・QEMUがサポートする形式である <br>・ファイル内にメタデータを持ち、スナップショットを取得できる  | qcow2 |
| 仮想マシンのディスクイメージのファイル形式で、以下の特徴を持つものは？（略語で） <br>・QEMUがサポートする形式である・単純なデータ列で構成され、実体はスパースファイル <br>・スナップショットの取得に対応していない | raw |
| 仮想マシンのディスクイメージのファイル形式で、VMwareによって開発され、VMware製品で広く使用されるものは？（略語で） | VMDK |
| 仮想マシンのディスクイメージのファイル形式で、Microsoftによって開発され、主にHyper-VやVirtual PCで使用されるものは？（略語で） | VHD |
| 仮想マシンのディスクイメージのファイル形式で、仮想マシンを異なるハイパーバイザー間で移行したり、仮想マシンを配布するために使用されるものは？（略語で） | OVF |

[戻る](../README.md#full-virtualization主題351)
